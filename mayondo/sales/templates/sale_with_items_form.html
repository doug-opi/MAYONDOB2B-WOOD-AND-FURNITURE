{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
    <h2>Create Sale with Items</h2>

    <form method="post" class="card p-4 shadow-sm" novalidate>
        {% csrf_token %}

        <h4>Sale Information</h4>
        <div class="mb-3">
            {{ form.customer_name.label_tag }}
            {{ form.customer_name }}
            {{ form.customer_name.errors }}
        </div>
        <div class="mb-3">
            {{ form.payment_type.label_tag }}
            {{ form.payment_type }}
            {{ form.payment_type.errors }}
        </div>
        <div class="form-check mb-3">
            {{ form.transport_required }}
            {{ form.transport_required.label_tag }}
            {{ form.transport_required.errors }}
        </div>

        <hr>
        <h4>Sale Items</h4>
        {{ formset.management_form }}
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Product</th>
                    <th>Quantity</th>
                    <th>Unit Price</th>
                    <th>Delete?</th>
                </tr>
            </thead>
            <tbody>
                {% for form in formset %}
                <tr>
                    <td>{{ form.product }}</td>
                    <td>{{ form.quantity }}</td>
                    <td>{{ form.unit_price}}</td>
                    <td>{{ form.DELETE }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <button type="submit" class="btn btn-primary">Save Sale</button>
    </form>
</div>
{% endblock %}
